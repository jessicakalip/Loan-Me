
<!-- Flex box containing Title and Avatar -->
<div class="responsive-avatar-title">
  <div class="ml-5 pl-4">
    <% if current_user == @hangout.user %>
    <h1 >Hangout with</h1>
    <h1 class="my-4"><%= @hangout.profile.name %></h1>
    <% else %>
    <h1>Request from</h1>
    <h1 class="my-4"><%= @hangout.user.email %></h1>
    <% end %>
  </div>
  <div>
    <div class="d-flex align-items-center justify-content-center">
      <% if @hangout.profile.photo.attached? %>
      <%= cl_image_tag @hangout.profile.photo.key, class: "avatar-hangout" %>
      <% else %>
      <%= cl_image_tag "avatar_ivxvwp", class: "avatar-hangout" %>
      <% end %>
    </div>
  </div>
</div>

<!-- Status and date/time -->
<div class="notification-content">
  <% if @hangout.status == "pending" %>
    <p class="ml-5 pl-4">Status: <span class="status-color-red"><%= @hangout.status %><span></p>
  <% elsif @hangout.status == "accepted" %>
    <p class="status-color-green ml-5 pl-4"><%= @hangout.status %></p>
  <% else %>
    <p class="status-color-blue ml-5 pl-4"><%= @hangout.status %></p>
  <% end %>
  <p class="ml-5 pl-4">When: <%= @hangout.date.strftime("%b %d, %Y") %> <%= @hangout.time.strftime("%I:%M %p") %></p>
</div>

<!-- Review -->
<div>
  <div>
    <div>
      <div>
        <div>
          <ul>
            <div>
              <% if @hangout.review && @hangout.review.persisted? %>
              <h5>
                <% case @hangout.review.rating %>
                <% when 1 %>
                <span class="fa fa-star checked"></span>
                <% when 2 %>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <% when 3 %>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <% when 4 %>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <% when 5 %>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <% end %>
              </h5>

              <h5><%= @hangout.review.comment %></h5>
              <% elsif policy(@review).create? %>
            </div>
            <div>
              <h3>Leave your review here ðŸ˜Š</h3>
              <%= simple_form_for [@hangout, @review] do |f| %>
              <%= f.input :comment %>
              <%= f.input :rating, collection: 1..5 %>
              <%= f.submit %>
              <% end %>
              <% end %>
            </div>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Buttons -->
<div class="hangout-button-div">
  <%# Update and complete button %>
  <% if policy(@hangout).update? && current_user == @hangout.user && @hangout.status != "pending" && @hangout.status != "completed"%>
    <%= link_to 'Edit', edit_hangout_path(@hangout), class: "hangout-button" %>
    <%= link_to 'Complete', hangout_path(@hangout, hangout: {status: "completed"}), method: :patch, class: "hangout-button", data: { confirm: "Are you sure?" }%>
  <% end %>
  <%# Delete button %>
  <% if policy(@hangout).destroy? %>
    <%= link_to "Delete", hangout_path(@hangout), class: "hangout-button", method: :delete, data: { confirm: "Are you sure?" } %>
    <% end %>
    <%# Accept and Reject button %>
    <% if current_user.profile == @hangout.profile && @hangout.status == "pending" %>
      <%= link_to 'Accept', hangout_path(@hangout, hangout: {status: "accepted"}), method: :patch, class: "hangout-button" %>
      <%= link_to 'Reject', hangout_path(@hangout, hangout: {status: "rejected"}), method: :patch, class: "hangout-button" %>
    <% end %>
    <%= link_to 'Back', dashboard_path, class: "hangout-button" %>
  </div>
</div>


